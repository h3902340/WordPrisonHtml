(()=>{"use strict";var t="#FC9B45",e="#51A6FF",r="#FFFFFF",n=50,i=50,o=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function l(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(l,a)}c((n=n.apply(t,e||[])).next())}))},l=function(t,e){var r,n,i,o,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(l=0)),l;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return l.label++,{value:a[1],done:!1};case 5:l.label++,n=a[1],a=[0];continue;case 7:a=l.ops.pop(),l.trys.pop();continue;default:if(!((i=(i=l.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){l=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){l.label=a[1];break}if(6===a[0]&&l.label<i[1]){l.label=i[1],i=a;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(a);break}i[2]&&l.ops.pop(),l.trys.pop();continue}a=e.call(t,l)}catch(t){a=[6,t],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},a=document.getElementById("mainCanvas"),c=a.getContext("2d");function s(t){return o(this,void 0,void 0,(function(){return l(this,(function(e){return[2,new Promise((function(e){return setTimeout(e,t)}))]}))}))}function u(o){o.isVerb?c.fillStyle=e:c.fillStyle=t;var l=n*o.word.length;c.fillRect(o.rect.x,o.rect.y,l,i),c.fillStyle=r,c.fillText(o.word,o.rect.x+.5*(l-30*o.word.length),o.rect.y+35)}function h(t,e,r){c.beginPath(),c.rect(t.x,t.y,t.w,t.h),c.lineWidth=r,c.strokeStyle=e,c.stroke()}function f(t){return o(this,void 0,void 0,(function(){var e,n,i,o;return l(this,(function(l){switch(l.label){case 0:e=function(t,e){for(var r=[],n=0;n<t.length;n+=20)r.push(t.substring(n,n+20));return r}(t),n=0,l.label=1;case 1:if(!(n<e.length))return[3,6];i=e[n],o=1,l.label=2;case 2:return o<=i.length?(c.fillStyle=r,c.fillText(i.substring(0,o),100,100+35*n),[4,s(40)]):[3,5];case 3:l.sent(),l.label=4;case 4:return o++,[3,2];case 5:return n++,[3,1];case 6:return[2]}}))}))}c.font="".concat(30,"px Arial");var y=function(){function t(){this.cardArray=[],this.inventoryTailX=110,this.inventoryTailY=350,this.rect={x:100,y:340,w:600,h:220}}return t.prototype.drawInventory=function(){var t;t=this.rect,c.fillStyle="#BEBEBE",c.fillRect(t.x,t.y,t.w,t.h);for(var e=0;e<this.cardArray.length;e++)this.cardArray[e].isSelected||u(this.cardArray[e])},t.prototype.addCard=function(t,e){var r=n*t.length;this.inventoryTailX+10+r>600&&(this.inventoryTailY+=10+i),this.cardArray.push({rect:{x:this.inventoryTailX,y:this.inventoryTailY,w:r,h:i},inventoryX:this.inventoryTailX,inventoryY:this.inventoryTailY,word:t,isVerb:e,isSelected:!1}),this.inventoryTailX=this.inventoryTailX+r+10},t}(),d=function(){function n(t,e,r){this.lineWidth=6,this.rect=t,this.isVerb=e,this.card=r}return n.prototype.drawSlot=function(){this.isVerb?h(this.rect,e,this.lineWidth):h(this.rect,t,this.lineWidth),this.card&&function(n,o,l){n.isVerb?c.fillStyle=e:c.fillStyle=t;var a=50*n.word.length,s=o-.5*a,u=l-.5*i;c.fillRect(s,u,a,i),c.fillStyle=r,c.fillText(n.word,s+.5*(a-30*n.word.length),u+35)}(this.card,this.rect.x+.5*this.rect.w,this.rect.y+.5*this.rect.h)},n}();(new(function(){function t(){this.inventory=new y,this.slotArray=[new d({x:145,y:270,w:150,h:50},!1,null),new d({x:325,y:270,w:150,h:50},!0,null),new d({x:505,y:270,w:150,h:50},!1,null)]}return t.prototype.Begin=function(){this.entrySequence()},t.prototype.entrySequence=function(){return t=this,e=void 0,n=function(){return function(t,e){var r,n,i,o,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(l=0)),l;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return l.label++,{value:a[1],done:!1};case 5:l.label++,n=a[1],a=[0];continue;case 7:a=l.ops.pop(),l.trys.pop();continue;default:if(!((i=(i=l.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){l=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){l.label=a[1];break}if(6===a[0]&&l.label<i[1]){l.label=i[1],i=a;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(a);break}i[2]&&l.ops.pop(),l.trys.pop();continue}a=e.call(t,l)}catch(t){a=[6,t],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,(function(t){switch(t.label){case 0:return this.drawLevel(),[4,f("這裡是哪裡？「我」醒了過來。發現在自己被困在一間「密室」。我摸著自己的口袋，沒有找到手機，無法對外聯繫。但發現一張詞卡「檢視」。這是做什麼用的？（獲得「密室」、「我」、「檢視」）")];case 1:return t.sent(),this.inventory.addCard("密室",!1),this.inventory.addCard("我",!1),this.inventory.addCard("檢視",!0),a.addEventListener("click",this.checkCardClick.bind(this)),this.drawLevel(),[2]}}))},new((r=void 0)||(r=Promise))((function(i,o){function l(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(l,a)}c((n=n.apply(t,e||[])).next())}));var t,e,r,n},t.prototype.checkCardClick=function(t){var e=this,r=function(t,e){var r=t.getBoundingClientRect();return{x:e.clientX-r.left,y:e.clientY-r.top}}(a,t);this.inventory.cardArray.forEach((function(t){if(n=r,i=t.rect,n.x>i.x&&n.x<i.x+i.w&&n.y<i.y+i.h&&n.y>i.y){var n,i,o=!1;if(t.isSelected){t.rect.x=t.inventoryX,t.rect.y=t.inventoryY,t.isSelected=!1;for(var l=0;l<e.slotArray.length;l++)if(e.slotArray[l].card==t){e.slotArray[l].card=null;break}o=!0}else for(l=0;l<e.slotArray.length;l++){var a=e.slotArray[l];if(a.isVerb==t.isVerb&&!a.card){a.card=t,t.isSelected=!0,t.rect.x=a.rect.x+.5*(a.rect.w-t.rect.w),t.rect.y=a.rect.y,o=!0;break}}o&&e.drawLevel()}}))},t.prototype.drawLevel=function(){var t;t={startPos:{x:0,y:270},endPos:{x:a.width,y:a.height}},c.clearRect(t.startPos.x,t.startPos.y,t.endPos.x,t.endPos.y);for(var e=0;e<this.slotArray.length;e++)this.slotArray[e].drawSlot();this.inventory.drawInventory()},t}())).Begin()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dEJMLEtBQUtTLFVBQVVWLGVBQ25CLEVBQ0osRUExRUEsS0RGTWMsTyIsInNvdXJjZXMiOlsid2VicGFjazovL215LXdlYnBhY2stcHJvamVjdC8uL3NyYy9HbG9iYWxTZXR0aW5nLnRzIiwid2VicGFjazovL215LXdlYnBhY2stcHJvamVjdC8uL3NyYy9VdGlsLnRzIiwid2VicGFjazovL215LXdlYnBhY2stcHJvamVjdC8uL3NyYy9JbnZlbnRvcnkudHMiLCJ3ZWJwYWNrOi8vbXktd2VicGFjay1wcm9qZWN0Ly4vc3JjL1Nsb3QudHMiLCJ3ZWJwYWNrOi8vbXktd2VicGFjay1wcm9qZWN0Ly4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL215LXdlYnBhY2stcHJvamVjdC8uL3NyYy9MZXZlbDEudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IG5vdW5fY29sb3IgPSBcIiNGQzlCNDVcIjtcbmV4cG9ydCBjb25zdCB2ZXJiX2NvbG9yID0gXCIjNTFBNkZGXCI7XG5leHBvcnQgY29uc3QgZGlhbG9ndWVfY29sb3IgPSBcIiNGRkZGRkZcIjtcbmV4cG9ydCBjb25zdCBpbnZlbnRvcnlfYmFja2dyb3VuZF9jb2xvciA9IFwiI0JFQkVCRVwiO1xuZXhwb3J0IGNvbnN0IGNhcmRfd2lkdGhfdW5pdCA9IDUwO1xuZXhwb3J0IGNvbnN0IGNhcmRfaGVpZ2h0ID0gNTA7XG5leHBvcnQgY29uc3QgZGlhbG9ndWVfZm9udF9zaXplID0gMzA7XG5leHBvcnQgY29uc3QgdHlwZV9pbnRlcnZhbCA9IDQwO1xuZXhwb3J0IGNvbnN0IGRpYWxvZ3VlX3dpZHRoID0gMjA7IiwiaW1wb3J0IHsgY2FyZF9oZWlnaHQsIGNhcmRfd2lkdGhfdW5pdCwgZGlhbG9ndWVfY29sb3IsIGRpYWxvZ3VlX2ZvbnRfc2l6ZSwgZGlhbG9ndWVfd2lkdGgsIG5vdW5fY29sb3IsIHR5cGVfaW50ZXJ2YWwsIHZlcmJfY29sb3IgfSBmcm9tIFwiLi9HbG9iYWxTZXR0aW5nXCI7XG5pbXBvcnQgeyBDYXJkLCBQb3NpdGlvbiwgUmVjdCB9IGZyb20gXCIuL1R5cGVEZWZpbml0aW9uXCI7XG5cbmV4cG9ydCBsZXQgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFpbkNhbnZhc1wiKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcbmxldCBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG5jdHguZm9udCA9IGAke2RpYWxvZ3VlX2ZvbnRfc2l6ZX1weCBBcmlhbGA7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzbGVlcChtczogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJDYW52YXMoY2xlYXJBcmVhOiB7IHN0YXJ0UG9zOiBQb3NpdGlvbiwgZW5kUG9zOiBQb3NpdGlvbiB9KTogdm9pZCB7XG4gICAgY3R4LmNsZWFyUmVjdChjbGVhckFyZWEuc3RhcnRQb3MueCwgY2xlYXJBcmVhLnN0YXJ0UG9zLnksIGNsZWFyQXJlYS5lbmRQb3MueCwgY2xlYXJBcmVhLmVuZFBvcy55KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdDYXJkRnJvbVRvcExlZnQoY2FyZDogQ2FyZCk6IHZvaWQge1xuICAgIGlmIChjYXJkLmlzVmVyYikge1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gdmVyYl9jb2xvcjtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gbm91bl9jb2xvcjtcbiAgICB9XG4gICAgbGV0IGNhcmRXaWR0aCA9IGNhcmRfd2lkdGhfdW5pdCAqIGNhcmQud29yZC5sZW5ndGg7XG4gICAgY3R4LmZpbGxSZWN0KGNhcmQucmVjdC54LCBjYXJkLnJlY3QueSwgY2FyZFdpZHRoLCBjYXJkX2hlaWdodCk7XG4gICAgY3R4LmZpbGxTdHlsZSA9IGRpYWxvZ3VlX2NvbG9yO1xuICAgIGN0eC5maWxsVGV4dChjYXJkLndvcmQsIGNhcmQucmVjdC54ICsgKGNhcmRXaWR0aCAtIGRpYWxvZ3VlX2ZvbnRfc2l6ZSAqIGNhcmQud29yZC5sZW5ndGgpICogLjUsIGNhcmQucmVjdC55ICsgMzUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZHJhd0NhcmRGcm9tQ2VudGVyKGNhcmQ6IENhcmQsIGNlbnRlclg6IG51bWJlciwgY2VudGVyWTogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKGNhcmQuaXNWZXJiKSB7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSB2ZXJiX2NvbG9yO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBub3VuX2NvbG9yO1xuICAgIH1cbiAgICBsZXQgY2FyZFdpZHRoID0gNTAgKiBjYXJkLndvcmQubGVuZ3RoO1xuICAgIGxldCB4ID0gY2VudGVyWCAtIGNhcmRXaWR0aCAqIC41O1xuICAgIGxldCB5ID0gY2VudGVyWSAtIGNhcmRfaGVpZ2h0ICogLjU7XG4gICAgY3R4LmZpbGxSZWN0KHgsIHksIGNhcmRXaWR0aCwgY2FyZF9oZWlnaHQpO1xuICAgIGN0eC5maWxsU3R5bGUgPSBkaWFsb2d1ZV9jb2xvcjtcbiAgICBjdHguZmlsbFRleHQoY2FyZC53b3JkLCB4ICsgKGNhcmRXaWR0aCAtIGRpYWxvZ3VlX2ZvbnRfc2l6ZSAqIGNhcmQud29yZC5sZW5ndGgpICogLjUsIHkgKyAzNSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkcmF3RmlsbGVkUmVjdChyZWN0OiBSZWN0LCBjb2xvcjogc3RyaW5nKTogdm9pZCB7XG4gICAgY3R4LmZpbGxTdHlsZSA9IGNvbG9yO1xuICAgIGN0eC5maWxsUmVjdChyZWN0LngsIHJlY3QueSwgcmVjdC53LCByZWN0LmgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZHJhd0hvbGxvd1JlY3QocmVjdDogUmVjdCwgY29sb3I6IHN0cmluZywgbGluZVdpZHRoOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgY3R4LnJlY3QocmVjdC54LCByZWN0LnksIHJlY3QudywgcmVjdC5oKTtcbiAgICBjdHgubGluZVdpZHRoID0gbGluZVdpZHRoO1xuICAgIGN0eC5zdHJva2VTdHlsZSA9IGNvbG9yO1xuICAgIGN0eC5zdHJva2UoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNwbGl0U3RyaW5nKHN0cjogc3RyaW5nLCBOOiBudW1iZXIpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgYXJyID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkgKz0gTikge1xuICAgICAgICBhcnIucHVzaChzdHIuc3Vic3RyaW5nKGksIGkgKyBOKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFycjtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNheSh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBsZXQgdGV4dFNwbGl0ID0gc3BsaXRTdHJpbmcodGV4dCwgZGlhbG9ndWVfd2lkdGgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGV4dFNwbGl0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBjdXJyZW50VGV4dCA9IHRleHRTcGxpdFtpXTtcbiAgICAgICAgZm9yIChsZXQgaiA9IDE7IGogPD0gY3VycmVudFRleHQubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBkaWFsb2d1ZV9jb2xvcjtcbiAgICAgICAgICAgIGN0eC5maWxsVGV4dChjdXJyZW50VGV4dC5zdWJzdHJpbmcoMCwgaiksIDEwMCwgMTAwICsgMzUgKiBpKTtcbiAgICAgICAgICAgIGF3YWl0IHNsZWVwKHR5cGVfaW50ZXJ2YWwpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TW91c2VQb3MoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCwgZXZlbnQ6IE1vdXNlRXZlbnQpOiBQb3NpdGlvbiB7XG4gICAgdmFyIHJlY3QgPSBjYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgeDogZXZlbnQuY2xpZW50WCAtIHJlY3QubGVmdCxcbiAgICAgICAgeTogZXZlbnQuY2xpZW50WSAtIHJlY3QudG9wLFxuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0luc2lkZShwb3M6IFBvc2l0aW9uLCByZWN0OiBSZWN0KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHBvcy54ID4gcmVjdC54ICYmIHBvcy54IDwgcmVjdC54ICsgcmVjdC53ICYmXG4gICAgICAgIHBvcy55IDwgcmVjdC55ICsgcmVjdC5oICYmIHBvcy55ID4gcmVjdC55O1xufVxuIiwiaW1wb3J0IHsgY2FyZF9oZWlnaHQsIGNhcmRfd2lkdGhfdW5pdCwgaW52ZW50b3J5X2JhY2tncm91bmRfY29sb3IgfSBmcm9tIFwiLi9HbG9iYWxTZXR0aW5nXCI7XG5pbXBvcnQgeyBDYXJkLCBSZWN0IH0gZnJvbSBcIi4vVHlwZURlZmluaXRpb25cIjtcbmltcG9ydCB7IGRyYXdDYXJkRnJvbVRvcExlZnQsIGRyYXdGaWxsZWRSZWN0IH0gZnJvbSBcIi4vVXRpbFwiO1xuXG5leHBvcnQgY2xhc3MgSW52ZW50b3J5IHtcbiAgICBwdWJsaWMgY2FyZEFycmF5OiBDYXJkW10gPSBbXTtcblxuICAgIHByaXZhdGUgaW52ZW50b3J5VGFpbFg6IG51bWJlciA9IDExMDtcbiAgICBwcml2YXRlIGludmVudG9yeVRhaWxZOiBudW1iZXIgPSAzNTA7XG4gICAgcHJpdmF0ZSByZWFkb25seSByZWN0OiBSZWN0ID0ge1xuICAgICAgICB4OiAxMDAsXG4gICAgICAgIHk6IDM0MCxcbiAgICAgICAgdzogNjAwLFxuICAgICAgICBoOiAyMjBcbiAgICB9O1xuXG4gICAgcHVibGljIGRyYXdJbnZlbnRvcnkoKTogdm9pZCB7XG4gICAgICAgIGRyYXdGaWxsZWRSZWN0KHRoaXMucmVjdCwgaW52ZW50b3J5X2JhY2tncm91bmRfY29sb3IpXG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNhcmRBcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRoaXMuY2FyZEFycmF5W2ldLmlzU2VsZWN0ZWQpIGNvbnRpbnVlO1xuICAgICAgICAgICAgZHJhd0NhcmRGcm9tVG9wTGVmdCh0aGlzLmNhcmRBcnJheVtpXSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkQ2FyZCh3b3JkOiBzdHJpbmcsIGlzVmVyYjogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBsZXQgY2FyZFdpZHRoID0gY2FyZF93aWR0aF91bml0ICogd29yZC5sZW5ndGg7XG4gICAgICAgIGxldCBuZXh0VGFpbFggPSB0aGlzLmludmVudG9yeVRhaWxYICsgMTAgKyBjYXJkV2lkdGg7XG4gICAgICAgIGlmIChuZXh0VGFpbFggPiA2MDApIHtcbiAgICAgICAgICAgIHRoaXMuaW52ZW50b3J5VGFpbFkgKz0gMTAgKyBjYXJkX2hlaWdodDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNhcmRBcnJheS5wdXNoKHtcbiAgICAgICAgICAgIHJlY3Q6IHtcbiAgICAgICAgICAgICAgICB4OiB0aGlzLmludmVudG9yeVRhaWxYLFxuICAgICAgICAgICAgICAgIHk6IHRoaXMuaW52ZW50b3J5VGFpbFksXG4gICAgICAgICAgICAgICAgdzogY2FyZFdpZHRoLFxuICAgICAgICAgICAgICAgIGg6IGNhcmRfaGVpZ2h0LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGludmVudG9yeVg6IHRoaXMuaW52ZW50b3J5VGFpbFgsXG4gICAgICAgICAgICBpbnZlbnRvcnlZOiB0aGlzLmludmVudG9yeVRhaWxZLFxuICAgICAgICAgICAgd29yZDogd29yZCxcbiAgICAgICAgICAgIGlzVmVyYjogaXNWZXJiLFxuICAgICAgICAgICAgaXNTZWxlY3RlZDogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaW52ZW50b3J5VGFpbFggPSB0aGlzLmludmVudG9yeVRhaWxYICsgY2FyZFdpZHRoICsgMTA7XG4gICAgfVxufSIsImltcG9ydCB7IHZlcmJfY29sb3IsIG5vdW5fY29sb3IgfSBmcm9tIFwiLi9HbG9iYWxTZXR0aW5nXCI7XG5pbXBvcnQgeyBDYXJkLCBSZWN0IH0gZnJvbSBcIi4vVHlwZURlZmluaXRpb25cIjtcbmltcG9ydCB7ZHJhd0NhcmRGcm9tQ2VudGVyLCBkcmF3SG9sbG93UmVjdH0gZnJvbSBcIi4vVXRpbFwiO1xuXG5leHBvcnQgY2xhc3MgU2xvdHtcbiAgICBwdWJsaWMgcmVjdDogUmVjdDtcbiAgICBwdWJsaWMgaXNWZXJiOiBib29sZWFuO1xuICAgIHB1YmxpYyBjYXJkOiBDYXJkO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgbGluZVdpZHRoID0gNjtcblxuICAgIGNvbnN0cnVjdG9yKHJlY3Q6IFJlY3QsIGlzVmVyYjogYm9vbGVhbiwgY2FyZDogQ2FyZCl7XG4gICAgICAgIHRoaXMucmVjdCA9IHJlY3Q7XG4gICAgICAgIHRoaXMuaXNWZXJiID0gaXNWZXJiO1xuICAgICAgICB0aGlzLmNhcmQgPSBjYXJkO1xuICAgIH1cblxuICAgIHB1YmxpYyBkcmF3U2xvdCgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuaXNWZXJiKSB7XG4gICAgICAgICAgICBkcmF3SG9sbG93UmVjdCh0aGlzLnJlY3QsIHZlcmJfY29sb3IsIHRoaXMubGluZVdpZHRoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRyYXdIb2xsb3dSZWN0KHRoaXMucmVjdCwgbm91bl9jb2xvciwgdGhpcy5saW5lV2lkdGgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNhcmQpIHtcbiAgICAgICAgICAgIGRyYXdDYXJkRnJvbUNlbnRlcih0aGlzLmNhcmQsIHRoaXMucmVjdC54ICsgdGhpcy5yZWN0LncgKiAuNSwgdGhpcy5yZWN0LnkgKyB0aGlzLnJlY3QuaCAqIC41KTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJpbXBvcnQge0xldmVsMX0gZnJvbSBcIi4vTGV2ZWwxXCI7XG5pbXBvcnQgeyBJTGV2ZWwgfSBmcm9tIFwiLi9UeXBlRGVmaW5pdGlvblwiO1xubGV0IGxldmVsOiBJTGV2ZWwgPSBuZXcgTGV2ZWwxKCk7XG5sZXZlbC5CZWdpbigpOyIsImltcG9ydCB7IEludmVudG9yeSB9IGZyb20gXCIuL0ludmVudG9yeVwiO1xuaW1wb3J0IHsgSUxldmVsLCBQb3NpdGlvbiB9IGZyb20gXCIuL1R5cGVEZWZpbml0aW9uXCI7XG5pbXBvcnQgeyBzYXksIGNsZWFyQ2FudmFzLCBjYW52YXMsIGdldE1vdXNlUG9zLCBpc0luc2lkZSB9IGZyb20gXCIuL1V0aWxcIjtcbmltcG9ydCB7IFNsb3QgfSBmcm9tIFwiLi9TbG90XCI7XG5cbmV4cG9ydCBjbGFzcyBMZXZlbDEgaW1wbGVtZW50cyBJTGV2ZWwge1xuICAgIHByaXZhdGUgaW52ZW50b3J5OiBJbnZlbnRvcnk7XG4gICAgcHJpdmF0ZSBzbG90QXJyYXk6IFNsb3RbXTtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5pbnZlbnRvcnkgPSBuZXcgSW52ZW50b3J5KCk7XG4gICAgICAgIHRoaXMuc2xvdEFycmF5ID0gW1xuICAgICAgICAgICAgbmV3IFNsb3QoeyB4OiAxNDUsIHk6IDI3MCwgdzogMTUwLCBoOiA1MCwgfSwgZmFsc2UsIG51bGwpLFxuICAgICAgICAgICAgbmV3IFNsb3QoeyB4OiAzMjUsIHk6IDI3MCwgdzogMTUwLCBoOiA1MCB9LCB0cnVlLCBudWxsKSxcbiAgICAgICAgICAgIG5ldyBTbG90KHsgeDogNTA1LCB5OiAyNzAsIHc6IDE1MCwgaDogNTAgfSwgZmFsc2UsIG51bGwpXG4gICAgICAgIF1cbiAgICB9XG5cbiAgICBwdWJsaWMgQmVnaW4oKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZW50cnlTZXF1ZW5jZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgZW50cnlTZXF1ZW5jZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy5kcmF3TGV2ZWwoKTtcbiAgICAgICAgYXdhaXQgc2F5KFwi6YCZ6KOh5piv5ZOq6KOh77yf44CM5oiR44CN6YaS5LqG6YGO5L6G44CC55m854++5Zyo6Ieq5bex6KKr5Zuw5Zyo5LiA6ZaT44CM5a+G5a6k44CN44CC5oiR5pG46JGX6Ieq5bex55qE5Y+j6KKL77yM5rKS5pyJ5om+5Yiw5omL5qmf77yM54Sh5rOV5bCN5aSW6IGv57mr44CC5L2G55m854++5LiA5by16Kme5Y2h44CM5qqi6KaW44CN44CC6YCZ5piv5YGa5LuA6bq855So55qE77yf77yI542y5b6X44CM5a+G5a6k44CN44CB44CM5oiR44CN44CB44CM5qqi6KaW44CN77yJXCIpO1xuICAgICAgICB0aGlzLmludmVudG9yeS5hZGRDYXJkKFwi5a+G5a6kXCIsIGZhbHNlKTtcbiAgICAgICAgdGhpcy5pbnZlbnRvcnkuYWRkQ2FyZChcIuaIkVwiLCBmYWxzZSk7XG4gICAgICAgIHRoaXMuaW52ZW50b3J5LmFkZENhcmQoXCLmqqLoppZcIiwgdHJ1ZSk7XG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2hlY2tDYXJkQ2xpY2suYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuZHJhd0xldmVsKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjaGVja0NhcmRDbGljayhldnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgbGV0IG1vdXNlUG9zOiBQb3NpdGlvbiA9IGdldE1vdXNlUG9zKGNhbnZhcywgZXZ0KTtcbiAgICAgICAgdGhpcy5pbnZlbnRvcnkuY2FyZEFycmF5LmZvckVhY2goY2FyZCA9PiB7XG4gICAgICAgICAgICBpZiAoIWlzSW5zaWRlKG1vdXNlUG9zLCBjYXJkLnJlY3QpKSByZXR1cm47XG4gICAgICAgICAgICBsZXQgbmVlZFRvUmVkcmF3TGV2ZWwgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChjYXJkLmlzU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBjYXJkLnJlY3QueCA9IGNhcmQuaW52ZW50b3J5WDtcbiAgICAgICAgICAgICAgICBjYXJkLnJlY3QueSA9IGNhcmQuaW52ZW50b3J5WTtcbiAgICAgICAgICAgICAgICBjYXJkLmlzU2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2xvdEFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNsb3RBcnJheVtpXS5jYXJkID09IGNhcmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2xvdEFycmF5W2ldLmNhcmQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmVlZFRvUmVkcmF3TGV2ZWwgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2xvdEFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzbG90ID0gdGhpcy5zbG90QXJyYXlbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChzbG90LmlzVmVyYiA9PSBjYXJkLmlzVmVyYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzbG90LmNhcmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbG90LmNhcmQgPSBjYXJkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmQuaXNTZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZC5yZWN0LnggPSBzbG90LnJlY3QueCArIChzbG90LnJlY3QudyAtIGNhcmQucmVjdC53KSAqIC41O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmQucmVjdC55ID0gc2xvdC5yZWN0Lnk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmVlZFRvUmVkcmF3TGV2ZWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobmVlZFRvUmVkcmF3TGV2ZWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdMZXZlbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGRyYXdMZXZlbCgpOiB2b2lkIHtcbiAgICAgICAgY2xlYXJDYW52YXMoe1xuICAgICAgICAgICAgc3RhcnRQb3M6IHsgeDogMCwgeTogMjcwIH0sXG4gICAgICAgICAgICBlbmRQb3M6IHsgeDogY2FudmFzLndpZHRoLCB5OiBjYW52YXMuaGVpZ2h0IH1cbiAgICAgICAgfSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zbG90QXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuc2xvdEFycmF5W2ldLmRyYXdTbG90KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbnZlbnRvcnkuZHJhd0ludmVudG9yeSgpO1xuICAgIH1cbn0iXSwibmFtZXMiOlsibm91bl9jb2xvciIsInZlcmJfY29sb3IiLCJkaWFsb2d1ZV9jb2xvciIsImNhcmRfd2lkdGhfdW5pdCIsImNhcmRfaGVpZ2h0IiwiY2FudmFzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImN0eCIsImdldENvbnRleHQiLCJzbGVlcCIsIm1zIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiZHJhd0NhcmRGcm9tVG9wTGVmdCIsImNhcmQiLCJpc1ZlcmIiLCJmaWxsU3R5bGUiLCJjYXJkV2lkdGgiLCJ3b3JkIiwibGVuZ3RoIiwiZmlsbFJlY3QiLCJyZWN0IiwieCIsInkiLCJmaWxsVGV4dCIsImRyYXdIb2xsb3dSZWN0IiwiY29sb3IiLCJsaW5lV2lkdGgiLCJiZWdpblBhdGgiLCJ3IiwiaCIsInN0cm9rZVN0eWxlIiwic3Ryb2tlIiwic2F5IiwidGV4dCIsInRleHRTcGxpdCIsInN0ciIsIk4iLCJhcnIiLCJpIiwicHVzaCIsInN1YnN0cmluZyIsInNwbGl0U3RyaW5nIiwiY3VycmVudFRleHQiLCJqIiwiZm9udCIsImNhcmRBcnJheSIsImludmVudG9yeVRhaWxYIiwiaW52ZW50b3J5VGFpbFkiLCJkcmF3SW52ZW50b3J5IiwidGhpcyIsImlzU2VsZWN0ZWQiLCJhZGRDYXJkIiwiaW52ZW50b3J5WCIsImludmVudG9yeVkiLCJkcmF3U2xvdCIsImNlbnRlclgiLCJjZW50ZXJZIiwiZHJhd0NhcmRGcm9tQ2VudGVyIiwiaW52ZW50b3J5IiwiSW52ZW50b3J5Iiwic2xvdEFycmF5IiwiU2xvdCIsIkJlZ2luIiwiZW50cnlTZXF1ZW5jZSIsImRyYXdMZXZlbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjaGVja0NhcmRDbGljayIsImJpbmQiLCJldnQiLCJtb3VzZVBvcyIsImV2ZW50IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiY2xpZW50WCIsImxlZnQiLCJjbGllbnRZIiwidG9wIiwiZ2V0TW91c2VQb3MiLCJmb3JFYWNoIiwicG9zIiwibmVlZFRvUmVkcmF3TGV2ZWwiLCJzbG90IiwiY2xlYXJBcmVhIiwic3RhcnRQb3MiLCJlbmRQb3MiLCJ3aWR0aCIsImhlaWdodCIsImNsZWFyUmVjdCJdLCJzb3VyY2VSb290IjoiIn0=